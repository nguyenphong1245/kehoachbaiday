# ============================================================
# KHBD Backend Environment Configuration
# ============================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to git - it contains secrets!
# ============================================================

# ======================== REQUIRED ========================

# BẮT BUỘC: Generate với: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Ứng dụng sẽ KHÔNG khởi động nếu chứa "CHANGE-ME"
SECRET_KEY=CHANGE-ME-generate-with-secrets-token-urlsafe

# Internal API key for scheduled tasks (auto-submit, peer review)
# BẮT BUỘC: Generate với: python -c "import secrets; print(secrets.token_urlsafe(32))"
INTERNAL_API_KEY=CHANGE-ME-generate-internal-api-key

# Database (PostgreSQL) - BẮT BUỘC
# Format: postgresql+asyncpg://username:password@host:port/dbname
SQL_DATABASE_URL=postgresql+asyncpg://khbd_user:your_password@localhost:5432/khbd_db

# ======================== AUTHENTICATION ========================

ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=120
REFRESH_TOKEN_EXPIRE_DAYS=30
EMAIL_VERIFICATION_TOKEN_EXPIRE_MINUTES=30
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=60

# Cookie settings
# Set COOKIE_SECURE=true in production (requires HTTPS)
COOKIE_SECURE=false
COOKIE_SAMESITE=lax
COOKIE_DOMAIN=

# ======================== FRONTEND/BACKEND URLs ========================

FRONTEND_BASE_URL=http://localhost:5173
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000

# CORS origins (comma-separated list)
# Example: http://localhost:5173,https://yourdomain.com
CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# ======================== EMAIL (SMTP) ========================

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
SMTP_USE_SSL=false
SMTP_DEFAULT_SENDER=no-reply@yourdomain.com
NOTIFICATION_ADMIN_EMAIL=admin@yourdomain.com

# ======================== AI PROVIDERS ========================

# Chat AI provider: gemini | openai | ollama
CHAT_AI_PROVIDER=gemini

# Google Gemini
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.5-flash
# Model riêng cho soạn KHBD (lesson plan builder) - dùng model mạnh nhất
GEMINI_MODEL_LESSON_PLAN=gemini-3-pro-preview

# OpenAI
OPENAI_API_KEY=
OPENAI_MODEL=gpt-3.5-turbo

# Ollama (local)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama2

# ======================== MEDIA SEARCH (Optional) ========================

# YouTube Data API v3 (for lesson video search)
YOUTUBE_API_KEY=

# Google Custom Search (for image search)
GOOGLE_CSE_API_KEY=
GOOGLE_CSE_CX=

# ======================== CODE EXECUTION ========================

# Piston API (code execution engine)
# Self-hosted: docker compose up -d && bash scripts/setup_piston.sh
PISTON_API_URL=http://localhost:2000/api/v2

# ======================== NEO4J (Optional) ========================

# Neo4j database for lesson content graph
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=

# ======================== LOGGING ========================

# Logging level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
